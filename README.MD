# ğŸ§  Deep Research Agent (Financial Domain)

A production-oriented **agentic deep research system** for financial analysis, built with **LangChain / LangGraph / DeepAgents**, supporting **multi-step planning, sub-agent delegation, tool-augmented reasoning, and persistent memory**.

This project demonstrates **two parallel implementations** of the same research capability:

- A **LangGraph-based agent system** (low-level, high control)
- A **DeepAgents-based agent system** (high-level, faster composition)

Both are designed to solve **real-world financial research tasks**, such as:

- Extracting company revenue from SEC filings
- Combining live financial data with RAG
- Producing structured, verifiable research reports

---

## âœ¨ Key Features

- ğŸ§© **Multi-agent architecture**
  - Orchestrator agent + specialized financial research sub-agents
- ğŸ—‚ **Tool-augmented reasoning**
  - Hybrid RAG search (vector + keyword)
  - Live financial data (Yahoo Finance MCP)
  - File-system based research artifacts
- ğŸ’¾ **Persistent memory**
  - SQLite-based checkpointing across sessions
- ğŸ§  **Explicit planning & verification**
  - Task decomposition â†’ research â†’ synthesis â†’ verification
- ğŸ”€ **Two architectural styles**
  - LangGraph (fine-grained control)
  - DeepAgents (rapid agent composition)

---

## ğŸ— Project Architecture

### High-level Flow

```text
User Query
   â†“
Orchestrator Agent
   â”œâ”€ Plans research steps
   â”œâ”€ Delegates tasks
   â†“
Financial Research Sub-Agent(s)
   â”œâ”€ Retrieve SEC / financial data
   â”œâ”€ Run hybrid RAG search
   â”œâ”€ Use live finance tools
   â†“
Synthesis & Verification
   â†“
Final Research Report (Markdown)

```

## ğŸ§  Two Implementations

To explore different levels of agent abstraction and control, this project provides two parallel implementations of the same financial research capability:

### 1ï¸âƒ£ LangGraph-Based Agent (Low-Level Control)

- ğŸ“‚ **Entrypoint**
  - `apps/finance_langgraph.py`

- âš™ï¸ **Characteristics**
  - Explicit graph-style orchestration
  - Custom agent state schema
  - Fine-grained control over:
    - Tool calls
    - Agent transitions
    - Memory checkpoints

- ğŸ¯ **Best for**
  - Complex workflows
  - Custom agent logic
  - Research / infra-level agent systems

---

### 2ï¸âƒ£ DeepAgents-Based Agent (High-Level Composition)

- ğŸ“‚ **Entrypoint**
  - `apps/finance_deepagents.py`

- âš™ï¸ **Characteristics**
  - Built on top of LangGraph
  - Built-in support for:
    - Sub-agents
    - File-system backends
    - Planning & todo tracking
  - Less boilerplate, faster iteration

- ğŸ¯ **Best for**
  - Rapid prototyping
  - Production-ready agent scaffolding
  - Clear separation of orchestration vs execution

## ğŸ“ Project Structure

```text
deep-research-agent/
â”œâ”€â”€ apps/                    # Runnable agent entrypoints
â”‚   â”œâ”€â”€ finance_langgraph.py
â”‚   â””â”€â”€ finance_deepagents.py
â”œâ”€â”€ scripts/                 # Core logic, tools, and offline pipelines
â”‚   â”œâ”€â”€ agent_utils.py
â”‚   â”œâ”€â”€ deep_prompts.py
â”‚   â”œâ”€â”€ prompts.py
â”‚   â”œâ”€â”€ file_tools.py
â”‚   â”œâ”€â”€ rag_tools.py
â”‚   â”œâ”€â”€ schema.py
â”‚   â”œâ”€â”€ yahoo_mcp.py
â”‚   â””â”€â”€ ingest_qdrant.py     # Build HYBRID Qdrant index from SEC filings
â”œâ”€â”€ data/                    # SQLite checkpoints (gitignored)
â”œâ”€â”€ research_outputs/        # Generated research artifacts (gitignored)
â”œâ”€â”€ .env.example
â”œâ”€â”€ .gitignore
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

## ğŸš€ How to Run

### 1ï¸âƒ£ Setup Environment

- ğŸ **Create virtual environment**
  - `python -m venv .venv`
  - `source .venv/bin/activate`

- ğŸ“¦ **Install dependencies**
  - `pip install -r requirements.txt`

- ğŸ” **Configure environment variables**
  - Create `.env` file from template
    - `cp .env.example .env`
  - Fill in required keys:
    - `GOOGLE_API_KEY`
    - `QDRANT_API_KEY`
    - `QDRANT_URL`
    - _(Optional)_ `LANGSMITH_API_KEY`

## ğŸ“„ Example Output

- ğŸ“Š **Key Result**
  - Amazon Q1 2024 Revenue: **$143.313B**
  - Year-over-Year Growth: **+13%**

- ğŸ“š **Sources**
  - Amazon Form 10-Q (Q1 2024)

- ğŸ—‚ **Generated Artifacts**
  - Research plan (`research_plan.md`)
  - Sub-agent research notes (`researcher/*.md`)
  - Final report (`final_report.md`)
